function setupCameraTooltip(){var e=document.getElementById("MyCameraButtonRow");if(e&&(e.style.display="none",document.getElementById("CameraTooltipDescriptionColumn").setAttribute("colspan",2),window.MyCameras)){e.style.display="block",document.getElementById("CameraTooltipDescriptionColumn").setAttribute("colspan",1);var e=document.getElementById("myCamerasDropdownList"),a=($(e).empty(),document.createDocumentFragment()),n=document.getElementById("manageMyCamerasDropdown").dataset.siteId;for(let e=0;e<window.MyCameras.length;e++){var s=window.MyCameras[e];let t=!1;for(let e=0;e<s.cameras.length;e++)n==s.cameras[e].cameraSiteId&&(t=!0);a.appendChild(createListItem(s.id,s.name,n,t))}e.appendChild(a),document.getElementById("newMyCameraListBtn").addEventListener("click",e=>{e.stopPropagation(),document.getElementById("newCameraListName").value="",document.getElementById("newMyCameraListBtn").style.display="none",document.getElementById("newMyCameraListRow").getElementsByClassName("error-msg")[0].style.display="none",document.getElementById("newMyCameraListRow").style.display="block",document.getElementById("newCameraListName").focus()},!1),document.getElementById("cancelMyCameraListBtn").addEventListener("click",e=>{e.stopPropagation(),document.getElementById("newMyCameraListRow").style.display="none",document.getElementById("newMyCameraListBtn").style.display="block"},!1),document.getElementById("saveMyCameraListBtn").addEventListener("click",e=>{e.stopPropagation();e=$("#newCameraListName").val();createNewList(e)},!1),document.getElementById("newCameraListName").addEventListener("keydown",e=>{"Enter"===e.key&&(e.stopPropagation(),e.preventDefault(),e=$("#newCameraListName").val(),createNewList(e))},!1),document.getElementById("myCamerasDropdown").addEventListener("click",e=>{e.stopPropagation()},!1),document.getElementById("newCameraListName").addEventListener("focus",()=>{document.querySelector("span.error-msg").style.display="none"},!1),document.getElementById("manageMyCamerasDropdown").addEventListener("click",()=>{document.querySelector("span.error-msg").style.display="none"},!1)}}function createListItem(e,t,a,n){var s=document.createElement("li"),m=document.createElement("label");let r=document.createElement("input");r.type="checkbox",r.className="cameraListCheckbox",r.dataset.listId=e,r.dataset.siteId=a,r.checked=n,r.addEventListener("click",()=>{updateMyCameraList(r)},!1),m.appendChild(r);e=document.createElement("span");return e.appendChild(document.createTextNode(t)),m.appendChild(e),m.title=t,s.appendChild(m),s}$(document).on("info-content-trigger",function(e,t,a){a.includes("MyCameraButtonRow")&&setupCameraTooltip()}),createNewList=function(e){null!=e.trim()&&0!=e.trim().length?addNewMyCameraList($("#newCameraListName").val()):($("#newMyCameraListRow .error-msg").html(resources.CamViewErrMsg),document.getElementById("newMyCameraListRow").getElementsByClassName("error-msg")[0].style.display="block")},addNewMyCameraList=function(e){$.ajax("/Camera/AddMyCameraList",{traditional:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({listName:e}),type:"POST"}).done(function(t){if(t.success){var a=$("<option>",{value:t.data.id,text:t.data.name});let e=0;for(var n=document.getElementById("manageMyCamerasDropdown").dataset.siteId,n=createListItem(t.data.id,t.data.name,n),s=$("#myCamerasDropdownList li").length;e<s;){var m=$("#myCamerasDropdownList li").eq(e).text();if(t.data.name.toLowerCase()<m.toLowerCase())break;e++}0==s||s==e?($("#myCameraList").append(a),$("#myCamerasDropdownList").append(n)):($("#myCameraList option").eq(e).before(a),$("#myCamerasDropdownList li").eq(e).before(n)),$("#myCameraList.selectpicker").selectpicker("refresh"),t.data.cameras=[],window.MyCameras.splice(e,0,t.data),document.getElementById("newMyCameraListRow").style.display="none",document.getElementById("newMyCameraListBtn").style.display="block"}}).fail(function(e){$("#newMyCameraListRow .error-msg").html(resources.MaxLength256ErrorMessage),document.getElementById("newMyCameraListRow").getElementsByClassName("error-msg")[0].style.display="block"})},updateMyCameraList=function(e){let t=e.dataset.listId;var a=e.dataset.siteId,e=e.checked;$.ajax("/Camera/SaveMyCameras",{traditional:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({CameraId:a,listId:t,isChecked:e}),type:"POST"}).done(function(){window.DisplayMyCamerasMobile&&window.DisplayMyCamerasMobile(),window.DisplayMyCameras&&window.DisplayMyCameras(t),$("#myCameraList").selectpicker("val",t),$(document).trigger("layer-changed",["MyCameras",null])})};