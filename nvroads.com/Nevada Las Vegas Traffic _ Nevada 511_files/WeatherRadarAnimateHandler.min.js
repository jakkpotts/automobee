var startPlaying=$("input[type='checkbox'][name='WeatherRadar']",$("#layerSelection")).attr("data-startPlaying"),startingFrame=$("input[type='checkbox'][name='WeatherRadar']",$("#layerSelection")).attr("data-startingFrame"),currentFrame=-1;function updateDate(e){e!=currentFrame&&(currentFrame=e,fetch("/map/weatherRadar/0/0/0?frame=".concat(e)).then(function(e){e=e.headers.get("Imagedate");$("#legend-tile-WeatherRadar > .legend-scale > #weatherRadarTime").text(moment(e).local().format(resources.DatePickerJsLongFormat))}))}$(document).on("animation-update-WeatherRadar",function(e,a){updateDate(a)}),$(document).on("timerbox-update-WeatherRadar",function(e,a){updateDate(a),document.getElementById("weatherRadarPausePlay").title===resources.Pause&&($("#weatherRadarPausePlay .far").each(function(){$(this).toggle()}),document.getElementById("weatherRadarPausePlay").title=resources.Play,document.getElementById("weatherRadarPausePlay").setAttribute("aria-label",resources.Play))}),$(document).ready(function(){var e=$("#legend-tile-WeatherRadar > .legend-scale"),a=(e.empty(),e.append('<div class="header">'+resources.WeatherRadarLabel+" </div> "),$('<img id="weatherRadarLegendGraphic" src="'+resources.WeatherRadarLegendPath+'"alt="'+resources.WeatherRadar+'" />')),a=(e.append(a),$('<p id="weatherRadarTime"></p>')),t=(updateDate(startingFrame),e.append(a),a="True"==startPlaying?$('<button id="weatherRadarPausePlay" title="'+resources.Pause+'" aria-label="'+resources.Pause+'"><i class="far fa-pause" aria-hidden="true"></i> <i class="far fa-play" aria-hidden="true" style="display: none;"></i></button>'):$('<button id="weatherRadarPausePlay" title="'+resources.Play+'" aria-label="'+resources.Play+'"><i class="far fa-pause" aria-hidden="true" style="display: none;"></i> <i class="far fa-play" aria-hidden="true"></i></button>'),e.append(a),$('<p id="weatherRadarProvider">'+resources.DataProvidedByEnvironmentCanada+"</p>"));e.append(t),a.click(function(){$("#weatherRadarPausePlay .far").each(function(){$(this).toggle()}),document.getElementById("weatherRadarPausePlay").title===resources.Pause?($(document).trigger("animation-toggle-WeatherRadar",["pause"]),document.getElementById("weatherRadarPausePlay").title=resources.Play,document.getElementById("weatherRadarPausePlay").setAttribute("aria-label",resources.Play)):($(document).trigger("animation-toggle-WeatherRadar",["play"]),document.getElementById("weatherRadarPausePlay").title=resources.Pause,document.getElementById("weatherRadarPausePlay").setAttribute("aria-label",resources.Pause))})});