(()=>{var c,p,u;$(document).on("ShowInfoWindow",function(e,a,i,o,t){var r,s;-1<resources.EventPolylineLayers.split(",").indexOf(i)&&(c&&c.setMap(null),p&&p.setMap(null),r=$('input[type="checkbox"][data-layerid="'+i+'"][data-polyline="true"]'),s=$('input[type="checkbox"][data-layerid="'+i+'"][data-polylineconfiguration="true"]'),$.ajax("/map/data/"+i+"/"+o).done(function(e){var o=e.location?e.location.linkEncodedPolyline:null,t=0<s.length?s.attr("data-polylinecolor"):resources.PolylineColour,l=0<s.length?s.attr("data-polylineopacity"):resources.PolylineOpacity,n=0<s.length?s.attr("data-polylineweight"):resources.PolylineWeight,l=(o&&0==r.length&&(t={strokeColor:t,strokeOpacity:l,strokeWeight:n,map:a.map,path:google.maps.geometry.encoding.decodePath(o)},c=new google.maps.Polyline(t)),e.regionDetails?e.regionDetails.detour.polyline:e.details.detailLang4.locationDescription);l&&(n={strokeColor:resources.DetourColour,strokeOpacity:resources.DetourOpacity,strokeWeight:resources.DetourWeight,map:a.map,path:google.maps.geometry.encoding.decodePath(l)},p=new google.maps.Polyline(n)),u=i}))}),$(document).on("mapLayerToggle",function(e,o,t){0==t&&o==u&&(c&&c.setMap(null),p)&&p.setMap(null)}),$(document).on("info-window-close",function(e){c&&c.setMap(null),p&&p.setMap(null)})})();