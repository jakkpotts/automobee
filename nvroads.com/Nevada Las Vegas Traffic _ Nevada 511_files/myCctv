window.AddMyCameraEvent=function(){var a=$("#addCameraButton").attr("class"),e=$("#addCameraButton").attr("data-id");let d;d="btn btn-primary"==a,$.ajax("/Camera/SaveMyCameras",{traditional:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({CameraId:e,isChecked:d}),type:"POST"}).done(function(){window.DisplayMyCamerasMobile&&window.DisplayMyCamerasMobile(),window.DisplayMyCameras&&window.DisplayMyCameras(),d?($("#addCameraButton").addClass("btn-danger").removeClass("btn-primary"),$("#addCameraButton").prop("value",window.resources.Remove),$("#addCameraButton").attr("title",window.resources.RemoveCameras)):($("#addCameraButton").addClass("btn-primary").removeClass("btn-danger"),$("#addCameraButton").prop("value",window.resources.Add),$("#addCameraButton").attr("title",window.resources.AddCameras)),$(document).trigger("layer-changed",["MyCameras",null])})},window.DisplayMyCameras=function(m){function c(a){let e="";var d;return"True"==resources.CctvEnableVideo&&(!a.videoDisabled&&a.videoUrl&&null!=a.videoType?(d=a.videoDisabled?"disabled":"",e=(e=(e+='<div class="text-center"><button class="btn btn-default btn-xs showMyVideo" id="showVideo-'+a.id+'" data-camera-id="'+a.id+'"'+d+"> "+resources.ShowVideo+" </button>")+'<button class="btn btn-default btn-xs hideMyVideo" id="hideVideo-'+a.id+'" data-camera-id="'+a.id+'" style="display:none">'+resources.HideVideo+"</button></div>")+'<div id="'+a.id+'-myVideoContainer" data-camera-id="'+a.id+'" data-videoauth="'+a.isVideoAuthRequired+'" data-videourl="'+a.videoUrl+'" data-streamtype="'+a.videoType+'"></div>'):a.videoDisabled?e+='<div class="text-center">  '+resources.CctvNoVideoAtThisTime+"  </div>":e+='<div class="text-center">  '+resources.CctvNoVideo+"</div>"),e}m=m||$("#myCameraList").val(),$.ajax("/Camera/GetUserCameras",{type:"GET",data:{listId:m},cache:!1}).done(function(a){if(Array.isArray(a.data)){var d=a.data;if(a.myCameras){var i=window.MyCameras.findIndex(a=>a.id==m);if(-1<i)for(let e of d){var r=window.MyCameras[i].cameras.findIndex(a=>a.cameraSiteId==e.id);-1<r?(window.MyCameras[i].cameras[r].cameraSiteId=e.id,window.MyCameras[i].cameras[r].source=e.source,window.MyCameras[i].cameras[r].sourceId=e.sourceId):window.MyCameras[i].cameras.push({cameraSiteId:e.id,source:e.source,sourceId:e.sourceId,cameraListId:m})}$("#myCameraList").val(m)}if($(".cameraCarousel").slick("slickRemove",null,null,!0),0===d.length)$("#NoCameras").show(),$("#myCameraTitle").hide();else{$("#NoCameras").hide(),$("#myCameraTitle").show();for(var e of d)if(void 0!==e.images)for(var t of e.images){let a="";t.description&&(a='<div class="dirDescHeader">'+t.description+"</div>");var s=t.CameraRefreshRateMs||resources.CameraRefreshRateMs,o=e.nickname||e.location,n=t.description||"",o='<img id="carouselId-'+t.id+'" data-id="'+t.id+'" data-site-id="'+e.id+'" data-title="'+o+'" data-lazy="/map/Cctv/'+t.id+'"  data-url="/map/Cctv/'+t.id+'" class="myCamImg" alt="'+n+'" data-refresh-rate="'+s+'" />';"True"==resources.CameraImageLink?$(".cameraCarousel").slick("slickAdd","<div>"+a+c(t)+'<a href="/map/Cctv/'+e.id+'"  target="_blank">'+o+"</a></div>"):$(".cameraCarousel").slick("slickAdd","<div>"+a+c(t)+o+"</div>")}0<d.length&&$(document).trigger("cameraCarouselLoaded")}}})};
