(()=>{var s;$(document).on("ShowInfoWindow",function(n,l,t,o,e){if(-1<resources.EventPolygonLayers.split(",").indexOf(t)){if(s)for(var a=0;a<s.length;a++)s[a].setMap(null);s=[],$.ajax("/map/data/"+t+"/"+o).done(function(n){var t=new MapFctns,o="";if(null!=n.geom?o=n.geom.geography.wellKnownText:null!=n.details&&null!=n.details.detailLang2.locationDescription&&(n.details.detailLang2.locationDescription.startsWith("POLYGON ((")||n.details.detailLang2.locationDescription.startsWith("MULTIPOLYGON (("))&&(o=n.details.detailLang2.locationDescription),""!=o)for(var e=t.GetPolygonFromWKT(o),a=0;a<e.length;a++){var i=e[a];i.setMap(l.map),s.push(i)}})}}),$(document).on("mapLayerToggle",function(n,t,o){if(0==o&&"WeatherEvents"==t&&s)for(var e=0;e<s.length;e++)s[e].setMap(null)}),$(document).on("info-window-close",function(n){if(s)for(var t=0;t<s.length;t++)s[t].setMap(null)})})();